%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% DOCUMENT SETTINGS                   %%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[11pt,a4paper,sans]{moderncv}        
% font size ('10pt', '11pt' and '12pt'), 
% paper size ('a4paper', 'letterpaper', 'a5paper', 'legalpaper', 'executivepaper', 'landscape')
% font family ('sans' and 'roman')

\moderncvcolor{cerulean}                           
% color options 'black', 'blue' (default), 'burgundy', 'green', 'grey', 'orange', 'purple' and 'red'; for contemporary style use 'cerulean'

% moderncv themes
\moderncvstyle[]{contemporary}                     
% style options: 'casual' (default), 'classic', 'banking', 'oldstyle', 'fancy', 'contemporary'
% the 'contemporary' style optionally takes the `qr` (default) or `noqr` options+

%\renewcommand{\familydefault}{\sfdefault}         % to set the default font; use '\sfdefault' for the default sans serif font, '\rmdefault' for the default roman one, or any tex font name

%\nopagenumbers{}                                  
% uncomment to suppress automatic page numbering for CVs longer than one page

% adjust the page margins
\usepackage[hmargin=0.5in,vmargin=10pt]{geometry}                  
% the 'contemporary' style looks better with reduced margins; uncomment the line below for increased margin
%\usepackage[scale=0.75]{geometry}

%dates's column width
\setlength{\hintscolumnwidth}{2.8cm}

%\setlength{\listitemsymbolspace}{10pt}            % set custom spacing between list symbol and text item (influences \cvlistitem and \cvlistdoubleitem)

% the 'contemporary' style allows to append additional elements to the head background; uncomment and customize if needed
%\def\@moderncvheadBackground{
%}

% font loading
% for luatex and xetex, do not use inputenc and fontenc
\ifxetexorluatex
  \usepackage{fontspec}
  \usepackage{unicode-math}
  \defaultfontfeatures{Ligatures=TeX}
  \setmainfont{Latin Modern Roman}[
    SmallCapsFont = {Latin Modern Roman Caps}
  ]
  \setsansfont{Latin Modern Sans}
  \setmonofont{Latin Modern Mono}
  \setmathfont{Latin Modern Math}
\else
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
  \usepackage{lmodern}
\fi


%%%%%%%%%%%%%%%%%%%%%
%% Italian Version %%
%%%%%%%%%%%%%%%%%%%%%

% --- GESTIONE LINGUA (Step 1) ---
\ifdefined\makeitalian
  % Se è definita la variabile 'makeitalian', l'italiano è l'ultima lingua (Principale)
  \usepackage[english,italian]{babel}
\else
  % Altrimenti (Default), l'inglese è l'ultima lingua (Principale)
  \usepackage[italian,english]{babel}
\fi
% --------------------------------


%define commands to print only in a specific language; in text sections use \en{english text} or \it{italian text} to put different language version of same text
\newcommand{\en}[1]{\iflanguage{english}{#1}{}}   
\newcommand{\it}[1]{\iflanguage{italian}{#1}{}}


% --- CARICA IL PARSER LUA ---
\input{commons/lua_data_loader}  % <--- IMPORTANTE

% --- CARICA I DATI PERSONALI ---
\loadPersonalData       % <--- LEGGE DAL JSON

\begin{document}
\makecvtitle

% --- ISTRUZIONE ---
\en{\section[\faGraduationCap]{Education}}
\it{\section[\faGraduationCap]{Istruzione}}
\printEducation

% --- ESPERIENZA ---
\en{\section[\faBriefcase]{Work Experience}}
\it{\section[\faBriefcase]{Esperienza Lavorativa}}
\printWorkExperience

% --- LINGUE ---
\en{\section[\faGlobe]{Languages}}
\it{\section[\faGlobe]{Lingue}}
\printLanguages

% --- SKILLS ---
\en{\section[\faCog]{Skills}}
\it{\section[\faCog]{Competenze}}
\printSkills

% --- PROGETTI ---
\en{\section[\faFolderOpen]{Project}}
\it{\section[\faFolderOpen]{Progetti}}
\printProjects

% --- FIRMA ---
\printSignature

% --- GDPR ---
\printGDPR
\end{document}